<!DOCTYPE html>
<html>
<head>
    <script src="../build/react.js"></script>
    <script src="../build/react-dom.js"></script>
    <script src="../build/browser.min.js"></script>
</head>
<body>
    <div id="example"></div>
    <script type="text/babel">
        var HelloOne = React.createClass({
            getDefaultProps: function() {
                // 组件类创建时候调用，仅调用一次，返回作为所有组件实例共享的组件属性
                // props为只读属性
                console.log('HelloOne------getDefaultProps');
                return {
                    defaultProp: 'defaultProp'
                };
            },
            getInitialState: function() {
                // 渲染前调用一次，实例化过程最先调用的方法，初始化组件实例的状态
                console.log('HelloOne------getInitialState');
                return {
                    initial: 'initialState',
                    inputValue: 'initialValue'
                };
            },
            componentWillMount: function() {
                // 渲染前调用一次，这个时候DOM结构还没有渲染。
                // this.props，this.state都已经准备好，可以根据传入的状态修改state而不会引起重绘，
                // 因为根本就还没有绘制
                console.log('HelloOne------componentWillMount');
            },
            componentDidMount: function() {
                // 渲染完成后调用一次，这个时候DOM结构已经渲染了。
                // 这个时候就可以初始化其他框架的设置了，如果利用jQuery绑定事件等等。
                // 一般我们会在这里异步获取数据，重新渲染页面
                console.log('HelloOne------componentDidMount');
            },
            componentWillReceiveProps: function(nextProps) {
                // 组件接收到新的props时会调用，一般在组件嵌套中比较常见，单一组件state变化是不会执行这个函数的
                debugger;
                console.log('HelloOne------componentWillReceiveProps:', nextProps);
            },
            shouldComponentUpdate: function(nextProps, nextState) {
                // 初始化渲染不会调用，接收到新的props或state时调用。
                console.log('HelloOne------shouldComponentUpdate:', nextProps, nextState);
                return true;
            },
            componentWillUpdate: function(nextProps, nextState) {
                // 初始化渲染不会调用，更新前调用。
                console.log('HelloOne------componentWillUpdate:', nextProps, nextState);
            },
            componentDidUpdate: function(prevProps, prevState) {
                // 初始化渲染不会调用，更新后调用。
                console.log('HelloOne------componentDidUpdate:', prevProps, prevState);
            },
            componentWillUnmount: function() {
                // 组件被移除前调用，这里可以做一些清除工作，例如清除内存，解除事件的监听等等。
                console.log('HelloOne------componentWillUnmount');
            },
            handleChange: function(e) {
                this.setState({
                    inputValue: e.target.value
                });
                // ReactDOM.unmountComponentAtNode(document.getElementById('example'));
            },
            render: function() {
                console.log('HelloOne------render');
                return <div className="hello-message">
                    <input type="text" value={this.state.inputValue} onChange={this.handleChange}/>
                    <p>{this.props.defaultProp}</p>
                </div>;
            }
        });
        
        console.log('------------defineCompleted----------');

        ReactDOM.render(
            <div className="page">
                <HelloOne className="" tt="123"></HelloOne>
            </div>,
            document.getElementById('example')
        );


        console.log('-------------initialCompleted--------');
    </script>
</body>
</html>